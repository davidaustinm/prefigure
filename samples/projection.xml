<diagram width="300" height="300" margins="5">

  <definition>v=(2,1)</definition>
  <definition>b=(2,4)</definition>
  <definition>bhat=dot(v,b)/dot(v,v)* v</definition>
  <definition>bperp=b- bhat</definition>

  <coordinates bbox="[-1,-1,5,5]">

    <grid-axes id="grid-axes"/>

    <group id="line-L">
      <line p1="(0,0)" p2="v" infinite="yes" stroke="blue" thickness="2"/>
      <label p="(4.4,2.5)">
	<m>L</m>
      </label>
    </group>

    <group id="vector-bperp">
      <label p="midpoint(b,bhat)" alignment="ne" clear-background="yes">
	<m>{\mathbf b}^\perp</m>
      </label>
      <vector v="bperp" tail="bhat" stroke="gray"/>
    </group>

    <group id="vector-b">
      <vector v="b"/>
      <label p="b" alignment="nw">
	<m>{\mathbf b}</m>
      </label>
    </group>

    <group id="vector-bhat">
      <vector v="bhat" stroke="red" />
      <label p="bhat" alignment="se">
	<m>\widehat{\mathbf b}</m>
      </label>
    </group>

    <group id="vector-v">
      <vector v="v"/>
      <label p="v" alignment="se">
	<m>{\mathbf v}</m>
      </label>
    </group>
  </coordinates>

  <annotations>
    <annotation id="figure"
		text="A line L, a vector b, and the orthogonal projection of b onto L">
      <annotation id="grid-axes"
		  text="The coordinate grid and axes">
	<annotation id="grid" text="The coordinate grid" />
	<annotation id="axes" text="The coordinate axes" />
      </annotation>
	
      <annotation id="vector-v"
		  text="The line L, a vector v parallel to L, and the vector b">
	<annotation id="line-L" text="The line L" />
	<annotation id="vector-v" text="A vector v that is parallel to L" />
	<annotation id="vector-b" text="The vector b" />
      </annotation>

      <annotation id="vector-bperp"
		  text="b is decomposed into b hat and b perp">
	<annotation id="vector-bperp"
		    text="The vector b perp is orthogonal to L"/>
	<annotation id="vector-bhat"
		    text="The vector b hat is parallel to L and is the orthogonal projection of b onto L"/>
      </annotation>
    </annotation>
  </annotations>
	
</diagram>

